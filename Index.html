<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wilson & Pinheiro Advocacia - Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0a2463;
            --primary-light: #1e3a8a;
            --primary-dark: #051438;
            --secondary: #c1121f;
            --secondary-light: #e63946;
            --accent: #ff9e00;
            --accent-light: #ffd166;
            --light: #f8f9fa;
            --dark: #1a1a2e;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --success: #38b000;
            --success-light: #7ae582;
            --warning: #ff9500;
            --danger: #d00000;
            --card-bg: #ffffff;
            --shadow: rgba(10, 36, 99, 0.08);
            --shadow-hover: rgba(10, 36, 99, 0.15);
            --gradient-primary: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            --gradient-secondary: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-light) 100%);
            --gradient-accent: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            --gradient-success: linear-gradient(135deg, var(--success) 0%, var(--success-light) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Premium */
        .header {
            background: var(--gradient-primary);
            border-radius: 0 0 25px 25px;
            color: white;
            padding: 25px 0;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(10, 36, 99, 0.15);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo-icon {
            font-size: 42px;
            color: var(--accent-light);
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
        }

        .logo-text h1 {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
            letter-spacing: 0.5px;
        }

        .logo-text p {
            font-size: 14px;
            opacity: 0.9;
            font-weight: 300;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 18px;
        }

        .user-info h4 {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .user-info p {
            font-size: 12px;
            opacity: 0.8;
        }

        .notification-bell {
            position: relative;
            background: rgba(255, 255, 255, 0.1);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .notification-bell:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 10px;
            height: 10px;
            background: var(--secondary);
            border-radius: 50%;
            border: 2px solid var(--primary);
        }

        .date-display {
            text-align: right;
        }

        .current-date {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .current-time {
            font-size: 14px;
            opacity: 0.9;
            font-weight: 300;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: auto;
            gap: 25px;
            margin-bottom: 40px;
        }

        /* Métricas Cards */
        .metric-card {
            grid-column: span 3;
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 25px var(--shadow);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .metric-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px var(--shadow-hover);
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-primary);
        }

        .metric-card:nth-child(2)::before {
            background: var(--gradient-secondary);
        }

        .metric-card:nth-child(3)::before {
            background: var(--gradient-accent);
        }

        .metric-card:nth-child(4)::before {
            background: var(--gradient-success);
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .metric-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .metric-icon {
            width: 55px;
            height: 55px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .metric-icon.clients {
            background: var(--gradient-primary);
        }

        .metric-icon.services {
            background: var(--gradient-secondary);
        }

        .metric-icon.goal {
            background: var(--gradient-accent);
        }

        .metric-icon.revenue {
            background: var(--gradient-success);
        }

        .metric-value {
            font-size: 38px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark);
            font-family: 'Inter', sans-serif;
        }

        .metric-value[contenteditable="true"] {
            padding: 5px 10px;
            border-radius: 8px;
            transition: all 0.3s;
            min-height: 50px;
            outline: none;
            border: 2px solid transparent;
        }

        .metric-value[contenteditable="true"]:focus {
            border-color: var(--primary);
            background-color: rgba(10, 36, 99, 0.05);
        }

        .metric-change {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
        }

        .metric-change.positive {
            color: var(--success);
        }

        .metric-change.negative {
            color: var(--danger);
        }

        .metric-detail {
            font-size: 13px;
            color: var(--gray);
            margin-top: 8px;
        }

        /* Gráfico de Progresso da Meta */
        .progress-card {
            grid-column: span 4;
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 25px var(--shadow);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .progress-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(56, 176, 0, 0.1) 0%, transparent 100%);
            border-radius: 0 0 0 100px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .progress-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--dark);
        }

        .progress-subtitle {
            font-size: 14px;
            color: var(--gray);
            margin-top: 5px;
        }

        .progress-wrapper {
            position: relative;
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
        }

        .progress-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 25px;
            position: relative;
            z-index: 1;
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
            width: 100%;
            gap: 20px;
        }

        .progress-stat {
            flex: 1;
            text-align: center;
            padding: 15px;
            background: var(--gray-light);
            border-radius: 12px;
            transition: all 0.3s;
        }

        .progress-stat:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-5px);
        }

        .progress-stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .progress-stat-label {
            font-size: 13px;
            color: var(--gray);
        }

        .progress-stat:hover .progress-stat-label {
            color: rgba(255, 255, 255, 0.9);
        }

        /* Gráfico Doughnut */
        .chart-container {
            grid-column: span 4;
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 25px var(--shadow);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(10, 36, 99, 0.05) 0%, transparent 100%);
            border-radius: 0 0 0 100px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .chart-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--dark);
        }

        .chart-subtitle {
            font-size: 14px;
            color: var(--gray);
            margin-top: 5px;
        }

        .chart-controls {
            display: flex;
            gap: 10px;
        }

        .chart-wrapper {
            position: relative;
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
        }

        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: var(--dark);
            background: var(--gray-light);
            padding: 8px 15px;
            border-radius: 50px;
            transition: all 0.3s;
        }

        .legend-item:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 4px;
        }

        /* Controles Card */
        .control-card {
            grid-column: span 4;
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 25px var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .control-card::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, rgba(193, 18, 31, 0.05) 0%, transparent 100%);
            border-radius: 100px 0 0 0;
        }

        .control-card.full-width {
            grid-column: span 12;
        }

        .card-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 25px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            z-index: 1;
        }

        .card-title i {
            color: var(--primary);
            font-size: 28px;
        }

        /* Formulários */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
        }

        .form-label i {
            color: var(--primary);
            font-size: 18px;
        }

        .form-input, .form-select, .form-textarea {
            padding: 16px 20px;
            border: 2px solid #e1e5f1;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            background-color: var(--light);
            font-family: 'Inter', sans-serif;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 4px rgba(10, 36, 99, 0.1);
            background-color: white;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        /* Botões */
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            position: relative;
            z-index: 1;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Inter', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(40, 40);
                opacity: 0;
            }
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(10, 36, 99, 0.25);
        }

        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 2px solid #e1e5f1;
        }

        .btn-secondary:hover {
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .btn-success {
            background: var(--gradient-success);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(56, 176, 0, 0.25);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger) 0%, #ff5a5f 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(208, 0, 0, 0.25);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #ffb347 100%);
            color: white;
        }

        .btn-warning:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 149, 0, 0.25);
        }

        .btn-sm {
            padding: 10px 20px;
            font-size: 14px;
        }

        /* Tabela */
        .table-container {
            overflow-x: auto;
            border-radius: 15px;
            border: 1px solid #e1e5f1;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            position: relative;
            z-index: 1;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            min-width: 1000px;
        }

        thead {
            background: var(--gradient-primary);
            color: white;
        }

        th {
            padding: 20px 16px;
            text-align: left;
            font-weight: 600;
            font-size: 15px;
            border-bottom: 2px solid var(--primary-dark);
        }

        tbody tr {
            transition: all 0.3s;
        }

        tbody tr:hover {
            background-color: rgba(10, 36, 99, 0.05);
            transform: scale(1.002);
        }

        tbody tr:nth-child(even) {
            background-color: #f8f9ff;
        }

        tbody tr:nth-child(even):hover {
            background-color: rgba(10, 36, 99, 0.08);
        }

        td {
            padding: 18px 16px;
            color: var(--dark);
            border-bottom: 1px solid #e1e5f1;
        }

        .status-badge {
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 600;
            text-align: center;
            display: inline-block;
            min-width: 100px;
        }

        .status-active {
            background-color: rgba(56, 176, 0, 0.15);
            color: var(--success);
        }

        .status-pending {
            background-color: rgba(255, 149, 0, 0.15);
            color: var(--warning);
        }

        .status-completed {
            background-color: rgba(10, 36, 99, 0.15);
            color: var(--primary);
        }

        .status-inactive {
            background-color: rgba(108, 117, 125, 0.15);
            color: var(--gray);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            background: var(--light);
            color: var(--dark);
        }

        .btn-icon:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-icon.btn-edit:hover {
            background: var(--primary);
            color: white;
        }

        .btn-icon.btn-delete:hover {
            background: var(--danger);
            color: white;
        }

        .btn-icon.btn-view:hover {
            background: var(--success);
            color: white;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin: 50px 0 30px;
            padding: 30px;
            background: var(--gradient-primary);
            border-radius: 25px;
            color: white;
            font-size: 14px;
            box-shadow: 0 10px 30px rgba(10, 36, 99, 0.15);
            position: relative;
            overflow: hidden;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,100 L100,100 L100,0 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }

        .footer-content {
            position: relative;
            z-index: 1;
        }

        .footer p {
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: var(--accent-light);
            text-decoration: none;
            transition: all 0.3s;
        }

        .footer-link:hover {
            color: white;
            transform: translateY(-2px);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background-color: white;
            border-radius: 25px;
            padding: 40px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(-30px) scale(0.95);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            position: relative;
        }

        .modal-overlay.active .modal {
            transform: translateY(0) scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--gray-light);
        }

        .modal-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            font-family: 'Playfair Display', serif;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--gray);
            transition: color 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: var(--danger);
            background: rgba(208, 0, 0, 0.1);
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            background-color: var(--gray-light);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            height: 20px;
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-success);
            border-radius: 10px;
            transition: width 1s ease-in-out;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(
                -45deg,
                rgba(255, 255, 255, 0.2) 25%,
                transparent 25%,
                transparent 50%,
                rgba(255, 255, 255, 0.2) 50%,
                rgba(255, 255, 255, 0.2) 75%,
                transparent 75%,
                transparent
            );
            background-size: 50px 50px;
            animation: move 2s linear infinite;
        }

        @keyframes move {
            0% {
                background-position: 0 0;
            }
            100% {
                background-position: 50px 50px;
            }
        }

        /* Novos Elementos */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .quick-action-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px var(--shadow);
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .quick-action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px var(--shadow-hover);
            border-color: var(--primary);
        }

        .quick-action-icon {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 15px;
            width: 70px;
            height: 70px;
            background: rgba(10, 36, 99, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
        }

        .quick-action-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .quick-action-desc {
            font-size: 14px;
            color: var(--gray);
        }

        /* Responsividade Mobile */
        @media (max-width: 1400px) {
            .metric-card, .progress-card, .chart-container, .control-card {
                grid-column: span 6;
            }
            
            .control-card.full-width {
                grid-column: span 12;
            }
        }

        @media (max-width: 1200px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .header-content {
                flex-direction: column;
                gap: 25px;
                text-align: center;
            }
            
            .header-controls {
                flex-direction: column;
                width: 100%;
            }
            
            .user-profile {
                width: 100%;
                justify-content: center;
            }
            
            .date-display {
                text-align: center;
            }
            
            .metric-card, .progress-card, .chart-container, .control-card {
                grid-column: span 12;
            }
            
            .progress-stats {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            .logo-text h1 {
                font-size: 24px;
            }
            
            .metric-value {
                font-size: 32px;
            }
            
            .card-title {
                font-size: 20px;
            }
            
            .btn {
                padding: 14px 24px;
                font-size: 14px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                justify-content: center;
                width: 100%;
            }
            
            .modal {
                padding: 25px;
            }
            
            .modal-title {
                font-size: 22px;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .chart-legend {
                flex-direction: column;
                align-items: center;
            }
            
            .legend-item {
                width: 100%;
                max-width: 250px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn-icon {
                width: 100%;
            }
        }

        /* Animações */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scrollbar Personalizada */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <i class="fas fa-balance-scale logo-icon"></i>
                    <div class="logo-text">
                        <h1>Wilson & Pinheiro</h1>
                        <p>Advocacia e Consultoria Jurídica</p>
                    </div>
                </div>
                
                <div class="header-controls">
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        <div class="notification-badge"></div>
                    </div>
                    
                    <div class="user-profile">
                        <div class="user-avatar">WP</div>
                        <div class="user-info">
                            <h4>Sócio Wilson</h4>
                            <p>Administrador</p>
                        </div>
                    </div>
                    
                    <div class="date-display">
                        <div class="current-date" id="currentDate"></div>
                        <div class="current-time" id="currentTime"></div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Cards de Métricas -->
            <div class="metric-card fade-in">
                <div class="metric-header">
                    <h3 class="metric-title">Clientes Ativos</h3>
                    <div class="metric-icon clients">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="metric-value" id="totalClients" contenteditable="true">24</div>
                <div class="metric-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>+12% em relação ao mês anterior</span>
                </div>
                <div class="metric-detail">5 novos clientes este mês</div>
            </div>
            
            <div class="metric-card fade-in" style="animation-delay: 0.1s">
                <div class="metric-header">
                    <h3 class="metric-title">Processos Ativos</h3>
                    <div class="metric-icon services">
                        <i class="fas fa-gavel"></i>
                    </div>
                </div>
                <div class="metric-value" id="activeServices" contenteditable="true">18</div>
                <div class="metric-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>+8% em relação ao mês anterior</span>
                </div>
                <div class="metric-detail">3 processos concluídos</div>
            </div>
            
            <div class="metric-card fade-in" style="animation-delay: 0.2s">
                <div class="metric-header">
                    <h3 class="metric-title">Meta Mensal</h3>
                    <div class="metric-icon goal">
                        <i class="fas fa-bullseye"></i>
                    </div>
                </div>
                <div class="metric-value" id="revenueGoal">R$ 85.000</div>
                <div class="metric-change positive" id="goalProgress">
                    <i class="fas fa-chart-line"></i>
                    <span>72% alcançado</span>
                </div>
                <div class="metric-detail">R$ 61.200 faturados</div>
            </div>
            
            <div class="metric-card fade-in" style="animation-delay: 0.3s">
                <div class="metric-header">
                    <h3 class="metric-title">Faturamento</h3>
                    <div class="metric-icon revenue">
                        <i class="fas fa-hand-holding-usd"></i>
                    </div>
                </div>
                <div class="metric-value" id="monthlyRevenue">R$ 61.200</div>
                <div class="metric-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>+15% em relação ao mês anterior</span>
                </div>
                <div class="metric-detail">Média: R$ 3.400 por processo</div>
            </div>
            
            <!-- Gráfico de Progresso da Meta -->
            <div class="progress-card fade-in" style="animation-delay: 0.4s">
                <div class="progress-header">
                    <div>
                        <h3 class="progress-title">Progresso da Meta</h3>
                        <p class="progress-subtitle">Quanto falta para atingir a meta mensal</p>
                    </div>
                    <div class="chart-controls">
                        <button class="btn-icon btn-edit" id="adjustGoalBtn" title="Ajustar meta">
                            <i class="fas fa-sliders-h"></i>
                        </button>
                    </div>
                </div>
                <div class="progress-wrapper">
                    <canvas id="goalProgressChart"></canvas>
                </div>
                <div class="progress-info">
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar" style="width: 72%"></div>
                    </div>
                    <div class="progress-stats">
                        <div class="progress-stat">
                            <div class="progress-stat-value" id="achievedValue">R$ 61.200</div>
                            <div class="progress-stat-label">Faturado</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value" id="remainingValue">R$ 23.800</div>
                            <div class="progress-stat-label">Falta</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value" id="progressPercent">72%</div>
                            <div class="progress-stat-label">Concluído</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Gráfico Doughnut -->
            <div class="chart-container fade-in" style="animation-delay: 0.5s">
                <div class="chart-header">
                    <div>
                        <h3 class="chart-title">Distribuição de Processos</h3>
                        <p class="chart-subtitle">Por área do direito</p>
                    </div>
                    <div class="chart-controls">
                        <button class="btn-icon btn-edit" id="editChartBtn" title="Editar dados do gráfico">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon btn-view" id="exportChartBtn" title="Exportar gráfico">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="servicesChart"></canvas>
                </div>
                <div class="chart-legend" id="chartLegend">
                    <!-- Legendas serão geradas dinamicamente -->
                </div>
            </div>
            
            <!-- Controles: Adicionar Cliente/Processo -->
            <div class="control-card fade-in" style="animation-delay: 0.6s">
                <h2 class="card-title">
                    <i class="fas fa-plus-circle"></i>
                    Adicionar Cliente/Processo
                </h2>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label" for="clientName">
                            <i class="fas fa-user"></i>
                            Nome do Cliente
                        </label>
                        <input type="text" id="clientName" class="form-input" placeholder="Ex: João da Silva">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="serviceType">
                            <i class="fas fa-gavel"></i>
                            Área do Direito
                        </label>
                        <select id="serviceType" class="form-select">
                            <option value="">Selecione uma área</option>
                            <option value="civil">Direito Civil</option>
                            <option value="empresarial">Direito Empresarial</option>
                            <option value="trabalhista">Direito Trabalhista</option>
                            <option value="familia">Direito de Família</option>
                            <option value="consumidor">Direito do Consumidor</option>
                            <option value="criminal">Direito Criminal</option>
                            <option value="ambiental">Direito Ambiental</option>
                            <option value="digital">Direito Digital</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="serviceValue">
                            <i class="fas fa-money-bill-wave"></i>
                            Valor do Contrato (R$)
                        </label>
                        <input type="number" id="serviceValue" class="form-input" placeholder="Ex: 5000">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="serviceStatus">
                            <i class="fas fa-info-circle"></i>
                            Status do Processo
                        </label>
                        <select id="serviceStatus" class="form-select">
                            <option value="active">Em Andamento</option>
                            <option value="pending">Pendente</option>
                            <option value="completed">Concluído</option>
                            <option value="inactive">Arquivado</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="processNumber">
                            <i class="fas fa-hashtag"></i>
                            Número do Processo
                        </label>
                        <input type="text" id="processNumber" class="form-input" placeholder="Ex: 0001234-56.2023.8.26.0100">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="opposingParty">
                            <i class="fas fa-user-friends"></i>
                            Parte Contrária
                        </label>
                        <input type="text" id="opposingParty" class="form-input" placeholder="Nome da parte contrária">
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-primary" id="addClientServiceBtn">
                        <i class="fas fa-save"></i>
                        Salvar Processo
                    </button>
                    <button class="btn btn-secondary" id="addRetroactiveBtn">
                        <i class="fas fa-history"></i>
                        Adicionar Retroativo
                    </button>
                    <button class="btn btn-success" id="suggestGoalBtn">
                        <i class="fas fa-lightbulb"></i>
                        Sugerir Meta
                    </button>
                </div>
            </div>
            
            <!-- Tabela de Clientes e Processos -->
            <div class="control-card full-width fade-in" style="animation-delay: 0.7s">
                <div class="card-title">
                    <i class="fas fa-list"></i>
                    Processos em Andamento
                    <span style="margin-left: auto; font-size: 14px; color: var(--gray);" id="processCount">0 processos</span>
                </div>
                
                <div class="table-container">
                    <table id="clientsTable">
                        <thead>
                            <tr>
                                <th>Cliente</th>
                                <th>Nº Processo</th>
                                <th>Área Jurídica</th>
                                <th>Valor (R$)</th>
                                <th>Data Início</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="clientsTableBody">
                            <!-- Dados serão inseridos dinamicamente -->
                        </tbody>
                    </table>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-warning" id="editMetricsBtn">
                        <i class="fas fa-edit"></i>
                        Editar Métricas
                    </button>
                    <button class="btn btn-primary" id="generateReportBtn">
                        <i class="fas fa-file-pdf"></i>
                        Gerar Relatório PDF
                    </button>
                    <button class="btn btn-danger" id="clearDataBtn">
                        <i class="fas fa-trash"></i>
                        Limpar Dados
                    </button>
                </div>
            </div>
            
            <!-- Novas Funcionalidades: Agenda e Próximas Audiências -->
            <div class="control-card full-width fade-in" style="animation-delay: 0.8s">
                <h2 class="card-title">
                    <i class="fas fa-calendar-alt"></i>
                    Próximas Audiências e Prazos
                </h2>
                
                <div class="quick-actions">
                    <div class="quick-action-card" onclick="viewHearings()">
                        <div class="quick-action-icon" style="background: rgba(193, 18, 31, 0.1); color: var(--secondary);">
                            <i class="fas fa-gavel"></i>
                        </div>
                        <h4 class="quick-action-title">Audiências</h4>
                        <p class="quick-action-desc">3 audiências esta semana</p>
                        <div class="metric-change positive" style="margin-top: 10px;">
                            <i class="fas fa-clock"></i>
                            <span>Próxima: 15/11 - 14:00h</span>
                        </div>
                    </div>
                    
                    <div class="quick-action-card" onclick="viewDeadlines()">
                        <div class="quick-action-icon" style="background: rgba(255, 158, 0, 0.1); color: var(--accent);">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h4 class="quick-action-title">Prazos Críticos</h4>
                        <p class="quick-action-desc">5 prazos esta semana</p>
                        <div class="metric-change negative" style="margin-top: 10px;">
                            <i class="fas fa-clock"></i>
                            <span>Vence hoje: 2 prazos</span>
                        </div>
                    </div>
                    
                    <div class="quick-action-card" onclick="addHearing()">
                        <div class="quick-action-icon" style="background: rgba(56, 176, 0, 0.1); color: var(--success);">
                            <i class="fas fa-plus"></i>
                        </div>
                        <h4 class="quick-action-title">Nova Audiência</h4>
                        <p class="quick-action-desc">Agendar nova audiência</p>
                        <div class="metric-change" style="margin-top: 10px;">
                            <i class="fas fa-calendar-plus"></i>
                            <span>Clique para agendar</span>
                        </div>
                    </div>
                    
                    <div class="quick-action-card" onclick="syncCalendar()">
                        <div class="quick-action-icon" style="background: rgba(10, 36, 99, 0.1); color: var(--primary);">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <h4 class="quick-action-title">Sincronizar</h4>
                        <p class="quick-action-desc">Sincronizar com Google Agenda</p>
                        <div class="metric-change" style="margin-top: 10px;">
                            <i class="fas fa-cloud"></i>
                            <span>Última: Hoje 08:00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>Wilson & Pinheiro Advocacia &copy; 2023 | Excelência em Consultoria Jurídica</p>
                <p>Rua das Flores, 123 - Centro, São Paulo/SP | (11) 3333-4444 | contato@wilsonpinheiro.adv.br</p>
                <div class="footer-links">
                    <a href="#" class="footer-link">Política de Privacidade</a>
                    <a href="#" class="footer-link">Termos de Uso</a>
                    <a href="#" class="footer-link">Suporte Técnico</a>
                    <a href="#" class="footer-link">Área do Cliente</a>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- Modal de Edição -->
    <div class="modal-overlay" id="editModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Editar Dados</h3>
                <button class="modal-close" id="modalCloseBtn">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Conteúdo do modal será inserido dinamicamente -->
            </div>
        </div>
    </div>

    <script>
        // Dados do sistema Wilson & Pinheiro Advocacia
        const lawFirmData = {
            clients: [],
            processes: [],
            revenueGoal: 85000,
            monthlyRevenue: 61200,
            serviceTypes: {
                'civil': { name: 'Direito Civil', count: 5, color: '#0a2463', revenue: 15000 },
                'empresarial': { name: 'Direito Empresarial', count: 4, color: '#1e3a8a', revenue: 22000 },
                'trabalhista': { name: 'Direito Trabalhista', count: 3, color: '#3a86ff', revenue: 9000 },
                'familia': { name: 'Direito de Família', count: 3, color: '#8338ec', revenue: 10500 },
                'consumidor': { name: 'Direito do Consumidor', count: 2, color: '#ff006e', revenue: 6000 },
                'criminal': { name: 'Direito Criminal', count: 1, color: '#fb5607', revenue: 3200 },
                'ambiental': { name: 'Direito Ambiental', count: 0, color: '#3a86ff', revenue: 0 },
                'digital': { name: 'Direito Digital', count: 0, color: '#06d6a0', revenue: 0 }
            },
            statusColors: {
                'active': 'status-active',
                'pending': 'status-pending',
                'completed': 'status-completed',
                'inactive': 'status-inactive'
            },
            statusLabels: {
                'active': 'Em Andamento',
                'pending': 'Pendente',
                'completed': 'Concluído',
                'inactive': 'Arquivado'
            },
            hearings: [
                { date: '2023-11-15', time: '14:00', client: 'Maria Santos', type: 'Audiência', process: '0001234-56.2023.8.26.0100' },
                { date: '2023-11-16', time: '10:30', client: 'Empresa XYZ', type: 'Conciliar', process: '0005678-90.2023.8.26.0200' },
                { date: '2023-11-17', time: '09:00', client: 'João Oliveira', type: 'Instrução', process: '0009012-34.2023.8.26.0300' }
            ],
            deadlines: [
                { date: '2023-11-13', description: 'Apresentação de contestação', client: 'Ana Costa', critical: true },
                { date: '2023-11-13', description: 'Recurso de apelação', client: 'Carlos Mendes', critical: true },
                { date: '2023-11-14', description: 'Juntada de documentos', client: 'Fernanda Lima', critical: false },
                { date: '2023-11-15', description: 'Pedido de perícia', client: 'Roberto Alves', critical: false },
                { date: '2023-11-16', description: 'Resposta ao agravo', client: 'Comércio ABC', critical: false }
            ]
        };

        // Inicializar dados
        function initializeData() {
            const exampleProcesses = [
                { id: 1, name: 'Maria Santos', service: 'civil', value: 5000, date: '2023-10-05', status: 'active', processNumber: '0001234-56.2023.8.26.0100', opposingParty: 'Construtora Alpha' },
                { id: 2, name: 'José Oliveira', service: 'trabalhista', value: 4200, date: '2023-10-10', status: 'completed', processNumber: '0005678-90.2023.8.26.0200', opposingParty: 'Empresa Beta' },
                { id: 3, name: 'Empresa XYZ Ltda', service: 'empresarial', value: 12000, date: '2023-10-15', status: 'active', processNumber: '0009012-34.2023.8.26.0300', opposingParty: 'Fornecedor Gamma' },
                { id: 4, name: 'Ana Costa', service: 'familia', value: 3500, date: '2023-10-18', status: 'pending', processNumber: '0003456-78.2023.8.26.0400', opposingParty: 'Ex-cônjuge' },
                { id: 5, name: 'Carlos Mendes', service: 'trabalhista', value: 4800, date: '2023-10-20', status: 'active', processNumber: '0007890-12.2023.8.26.0500', opposingParty: 'Ex-empregador' },
                { id: 6, name: 'Fernanda Lima', service: 'civil', value: 10000, date: '2023-10-22', status: 'completed', processNumber: '0002345-67.2023.8.26.0600', opposingParty: 'Seguradora Delta' },
                { id: 7, name: 'Roberto Alves', service: 'consumidor', value: 3000, date: '2023-10-25', status: 'active', processNumber: '0004567-89.2023.8.26.0700', opposingParty: 'Loja Epsilon' },
                { id: 8, name: 'Comércio ABC', service: 'empresarial', value: 10000, date: '2023-10-28', status: 'pending', processNumber: '0006789-01.2023.8.26.0800', opposingParty: 'Concorrente Zeta' },
                { id: 9, name: 'Patrícia Souza', service: 'familia', value: 4000, date: '2023-11-01', status: 'active', processNumber: '0008901-23.2023.8.26.0900', opposingParty: 'Ex-cônjuge' },
                { id: 10, name: 'Indústrias EFG', service: 'criminal', value: 3200, date: '2023-11-03', status: 'active', processNumber: '0000123-45.2023.8.26.1000', opposingParty: 'Ministério Público' }
            ];

            lawFirmData.processes = exampleProcesses;
            updateServiceCounters();
            updateProcessesTable();
            updateServicesChart();
            updateGoalProgressChart();
            updateDateTime();
        }

        // Atualizar data e hora
        function updateDateTime() {
            const now = new Date();
            
            const dateElement = document.getElementById('currentDate');
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            dateElement.textContent = now.toLocaleDateString('pt-BR', options);
            
            const timeElement = document.getElementById('currentTime');
            timeElement.textContent = now.toLocaleTimeString('pt-BR');
            
            setTimeout(updateDateTime, 1000);
        }

        // Atualizar contadores
        function updateServiceCounters() {
            let activeProcesses = 0;
            lawFirmData.monthlyRevenue = 0;
            
            lawFirmData.processes.forEach(process => {
                if (lawFirmData.serviceTypes[process.service]) {
                    lawFirmData.serviceTypes[process.service].revenue += process.value;
                    lawFirmData.monthlyRevenue += process.value;
                    
                    if (process.status === 'active') {
                        activeProcesses++;
                    }
                }
            });

            document.getElementById('totalClients').textContent = lawFirmData.processes.length;
            document.getElementById('activeServices').textContent = activeProcesses;
            document.getElementById('monthlyRevenue').textContent = formatCurrency(lawFirmData.monthlyRevenue);
            document.getElementById('revenueGoal').textContent = formatCurrency(lawFirmData.revenueGoal);
            
            const goalProgress = lawFirmData.revenueGoal > 0 ? 
                (lawFirmData.monthlyRevenue / lawFirmData.revenueGoal) * 100 : 0;
            const progressText = `${Math.min(goalProgress, 100).toFixed(1)}% alcançado`;
            document.getElementById('goalProgress').innerHTML = `<i class="fas fa-chart-line"></i><span>${progressText}</span>`;
            
            document.getElementById('processCount').textContent = `${lawFirmData.processes.length} processos`;
            
            // Atualizar gráfico de progresso
            updateGoalProgressChart();
        }

        // Atualizar gráfico de progresso da meta
        function updateGoalProgressChart() {
            const ctx = document.getElementById('goalProgressChart').getContext('2d');
            const achieved = lawFirmData.monthlyRevenue;
            const goal = lawFirmData.revenueGoal;
            const remaining = Math.max(0, goal - achieved);
            const percentage = goal > 0 ? Math.min((achieved / goal) * 100, 100) : 0;
            
            // Destruir gráfico anterior se existir
            if (window.goalProgressChartInstance) {
                window.goalProgressChartInstance.destroy();
            }
            
            // Criar gráfico de progresso da meta
            window.goalProgressChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Faturado', 'Falta'],
                    datasets: [{
                        data: [achieved, remaining],
                        backgroundColor: [
                            'rgba(56, 176, 0, 0.8)', // Verde para faturado
                            'rgba(220, 220, 220, 0.3)' // Cinza claro para falta
                        ],
                        borderWidth: 0,
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '80%',
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    return `${label}: ${formatCurrency(value)} (${context.parsed}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true,
                        duration: 1000
                    }
                },
                plugins: [{
                    id: 'centerText',
                    afterDraw: (chart) => {
                        const { ctx, chartArea: { width, height } } = chart;
                        ctx.save();
                        
                        // Texto central
                        ctx.font = 'bold 24px Inter';
                        ctx.fillStyle = '#0a2463';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText(`${percentage.toFixed(1)}%`, width / 2, height / 2 - 15);
                        
                        ctx.font = '12px Inter';
                        ctx.fillStyle = '#6c757d';
                        ctx.fillText('da meta', width / 2, height / 2 + 15);
                        
                        ctx.restore();
                    }
                }]
            });
            
            // Atualizar barra de progresso e estatísticas
            document.getElementById('progressBar').style.width = `${percentage}%`;
            document.getElementById('achievedValue').textContent = formatCurrency(achieved);
            document.getElementById('remainingValue').textContent = formatCurrency(remaining);
            document.getElementById('progressPercent').textContent = `${percentage.toFixed(1)}%`;
            
            // Cor da barra de progresso baseada na porcentagem
            const progressBar = document.getElementById('progressBar');
            if (percentage >= 100) {
                progressBar.style.background = 'linear-gradient(135deg, #38b000 0%, #7ae582 100%)';
            } else if (percentage >= 75) {
                progressBar.style.background = 'linear-gradient(135deg, #90be6d 0%, #43aa8b 100%)';
            } else if (percentage >= 50) {
                progressBar.style.background = 'linear-gradient(135deg, #ff9e00 0%, #ffd166 100%)';
            } else if (percentage >= 25) {
                progressBar.style.background = 'linear-gradient(135deg, #f3722c 0%, #f8961e 100%)';
            } else {
                progressBar.style.background = 'linear-gradient(135deg, #f94144 0%, #f3722c 100%)';
            }
        }

        // Atualizar gráfico de distribuição
        function updateServicesChart() {
            const ctx = document.getElementById('servicesChart').getContext('2d');
            
            const labels = [];
            const data = [];
            const backgroundColors = [];
            
            Object.keys(lawFirmData.serviceTypes).forEach(key => {
                const service = lawFirmData.serviceTypes[key];
                if (service.count > 0) {
                    labels.push(service.name);
                    data.push(service.count);
                    backgroundColors.push(service.color);
                }
            });
            
            if (window.servicesChartInstance) {
                window.servicesChartInstance.destroy();
            }
            
            window.servicesChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: backgroundColors,
                        borderWidth: 3,
                        borderColor: '#ffffff',
                        hoverOffset: 20
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${value} processos (${percentage}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true,
                        duration: 1000
                    }
                }
            });
            
            updateChartLegend();
        }

        // Atualizar legenda
        function updateChartLegend() {
            const legendContainer = document.getElementById('chartLegend');
            legendContainer.innerHTML = '';
            
            Object.keys(lawFirmData.serviceTypes).forEach(key => {
                const service = lawFirmData.serviceTypes[key];
                if (service.count > 0) {
                    const legendItem = document.createElement('div');
                    legendItem.className = 'legend-item';
                    legendItem.innerHTML = `
                        <div class="legend-color" style="background-color: ${service.color}"></div>
                        <span>${service.name}</span>
                        <span style="font-weight: 600; margin-left: auto;">${service.count}</span>
                    `;
                    legendContainer.appendChild(legendItem);
                }
            });
        }

        // Atualizar tabela
        function updateProcessesTable() {
            const tableBody = document.getElementById('clientsTableBody');
            tableBody.innerHTML = '';
            
            lawFirmData.processes.forEach((process, index) => {
                const row = document.createElement('tr');
                const formattedDate = new Date(process.date).toLocaleDateString('pt-BR');
                const statusClass = lawFirmData.statusColors[process.status] || 'status-inactive';
                const statusLabel = lawFirmData.statusLabels[process.status] || 'Indefinido';
                
                row.innerHTML = `
                    <td><strong>${process.name}</strong></td>
                    <td><code>${process.processNumber}</code></td>
                    <td>${lawFirmData.serviceTypes[process.service]?.name || process.service}</td>
                    <td><strong>${formatCurrency(process.value)}</strong></td>
                    <td>${formattedDate}</td>
                    <td><span class="status-badge ${statusClass}">${statusLabel}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-edit" onclick="editProcess(${index})" title="Editar processo">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-icon btn-view" onclick="viewProcess(${index})" title="Ver detalhes">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn-icon btn-delete" onclick="deleteProcess(${index})" title="Excluir processo">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Formatar moeda
        function formatCurrency(value) {
            return 'R$ ' + value.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

        // Mostrar notificação
        function showNotification(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
            
            // Em produção, implementar sistema de notificações
            alert(message);
        }

        // Ajustar meta
        function adjustGoal() {
            const modal = document.getElementById('editModal');
            const modalBody = document.getElementById('modalBody');
            const modalTitle = document.getElementById('modalTitle');
            
            modalTitle.textContent = 'Ajustar Meta de Faturamento';
            
            modalBody.innerHTML = `
                <div class="form-grid" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label class="form-label">Meta Atual</label>
                        <input type="text" class="form-input" value="${formatCurrency(lawFirmData.revenueGoal)}" disabled>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Nova Meta (R$)</label>
                        <input type="number" id="newGoalValue" class="form-input" value="${lawFirmData.revenueGoal}" min="1000" step="1000">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Motivo do Ajuste</label>
                        <select id="goalAdjustmentReason" class="form-select">
                            <option value="increase">Aumento de demanda</option>
                            <option value="new_clients">Novos clientes</option>
                            <option value="market">Condições de mercado</option>
                            <option value="other">Outro motivo</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Observações</label>
                        <textarea id="goalNotes" class="form-textarea" placeholder="Observações sobre o ajuste de meta" rows="3"></textarea>
                    </div>
                </div>
                
                <div class="progress-info" style="margin-top: 20px;">
                    <div class="progress-stat">
                        <div class="progress-stat-value" id="currentAchieved">${formatCurrency(lawFirmData.monthlyRevenue)}</div>
                        <div class="progress-stat-label">Faturado Atual</div>
                    </div>
                    <div class="progress-stat">
                        <div class="progress-stat-value" id="newProgress">0%</div>
                        <div class="progress-stat-label">Progresso com Nova Meta</div>
                    </div>
                </div>
                
                <div class="button-group" style="margin-top: 25px;">
                    <button class="btn btn-success" id="saveGoalBtn">
                        <i class="fas fa-check"></i>
                        Aplicar Nova Meta
                    </button>
                    <button class="btn btn-secondary" id="cancelGoalBtn">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                </div>
            `;
            
            // Atualizar progresso com nova meta em tempo real
            const newGoalInput = document.getElementById('newGoalValue');
            const newProgressElement = document.getElementById('newProgress');
            
            newGoalInput.addEventListener('input', function() {
                const newGoal = parseFloat(this.value) || 0;
                const progress = newGoal > 0 ? Math.min((lawFirmData.monthlyRevenue / newGoal) * 100, 100) : 0;
                newProgressElement.textContent = `${progress.toFixed(1)}%`;
            });
            
            modal.classList.add('active');
            
            document.getElementById('saveGoalBtn').addEventListener('click', function() {
                const newGoal = parseFloat(document.getElementById('newGoalValue').value);
                const reason = document.getElementById('goalAdjustmentReason').value;
                const notes = document.getElementById('goalNotes').value;
                
                if (isNaN(newGoal) || newGoal <= 0) {
                    showNotification('Informe um valor válido para a nova meta.', 'error');
                    return;
                }
                
                lawFirmData.revenueGoal = newGoal;
                updateServiceCounters();
                
                modal.classList.remove('active');
                showNotification(`Meta ajustada para ${formatCurrency(newGoal)}!`, 'success');
            });
            
            document.getElementById('cancelGoalBtn').addEventListener('click', function() {
                modal.classList.remove('active');
            });
        }

        // Adicionar processo
        function addProcess() {
            const clientName = document.getElementById('clientName').value.trim();
            const serviceType = document.getElementById('serviceType').value;
            const serviceValue = parseFloat(document.getElementById('serviceValue').value);
            const serviceStatus = document.getElementById('serviceStatus').value;
            const processNumber = document.getElementById('processNumber').value.trim();
            const opposingParty = document.getElementById('opposingParty').value.trim();
            
            if (!clientName) {
                showNotification('Informe o nome do cliente.', 'error');
                return;
            }
            
            if (!serviceType) {
                showNotification('Selecione a área do direito.', 'error');
                return;
            }
            
            if (isNaN(serviceValue) || serviceValue <= 0) {
                showNotification('Informe um valor válido para o contrato.', 'error');
                return;
            }
            
            if (!processNumber) {
                showNotification('Informe o número do processo.', 'error');
                return;
            }
            
            const newProcess = {
                id: lawFirmData.processes.length + 1,
                name: clientName,
                service: serviceType,
                value: serviceValue,
                date: new Date().toISOString().split('T')[0],
                status: serviceStatus,
                processNumber: processNumber,
                opposingParty: opposingParty
            };
            
            lawFirmData.processes.push(newProcess);
            
            updateServiceCounters();
            updateProcessesTable();
            updateServicesChart();
            
            // Limpar formulário
            document.getElementById('clientName').value = '';
            document.getElementById('serviceType').value = '';
            document.getElementById('serviceValue').value = '';
            document.getElementById('serviceStatus').value = 'active';
            document.getElementById('processNumber').value = '';
            document.getElementById('opposingParty').value = '';
            
            showNotification(`Processo ${processNumber} adicionado com sucesso!`, 'success');
        }

        // Editar processo
        function editProcess(index) {
            const process = lawFirmData.processes[index];
            const modal = document.getElementById('editModal');
            const modalBody = document.getElementById('modalBody');
            const modalTitle = document.getElementById('modalTitle');
            
            modalTitle.textContent = `Editar Processo: ${process.processNumber}`;
            
            modalBody.innerHTML = `
                <div class="form-grid" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label class="form-label">Cliente</label>
                        <input type="text" id="editClientName" class="form-input" value="${process.name}">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Número do Processo</label>
                        <input type="text" id="editProcessNumber" class="form-input" value="${process.processNumber}">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Área do Direito</label>
                        <select id="editServiceType" class="form-select">
                            ${Object.keys(lawFirmData.serviceTypes).map(key => 
                                `<option value="${key}" ${key === process.service ? 'selected' : ''}>${lawFirmData.serviceTypes[key].name}</option>`
                            ).join('')}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" id="editServiceValue" class="form-input" value="${process.value}">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select id="editServiceStatus" class="form-select">
                            ${Object.keys(lawFirmData.statusLabels).map(key => 
                                `<option value="${key}" ${key === process.status ? 'selected' : ''}>${lawFirmData.statusLabels[key]}</option>`
                            ).join('')}
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Parte Contrária</label>
                        <input type="text" id="editOpposingParty" class="form-input" value="${process.opposingParty || ''}">
                    </div>
                </div>
                
                <div class="button-group" style="margin-top: 25px;">
                    <button class="btn btn-success" id="saveEditBtn">
                        <i class="fas fa-save"></i>
                        Salvar Alterações
                    </button>
                    <button class="btn btn-secondary" id="cancelEditBtn">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                </div>
            `;
            
            modal.classList.add('active');
            
            document.getElementById('saveEditBtn').addEventListener('click', function() {
                lawFirmData.processes[index].name = document.getElementById('editClientName').value;
                lawFirmData.processes[index].processNumber = document.getElementById('editProcessNumber').value;
                lawFirmData.processes[index].service = document.getElementById('editServiceType').value;
                lawFirmData.processes[index].value = parseFloat(document.getElementById('editServiceValue').value);
                lawFirmData.processes[index].status = document.getElementById('editServiceStatus').value;
                lawFirmData.processes[index].opposingParty = document.getElementById('editOpposingParty').value;
                
                updateServiceCounters();
                updateProcessesTable();
                updateServicesChart();
                
                modal.classList.remove('active');
                showNotification('Processo atualizado com sucesso!', 'success');
            });
            
            document.getElementById('cancelEditBtn').addEventListener('click', function() {
                modal.classList.remove('active');
            });
        }

        // Ver detalhes do processo
        function viewProcess(index) {
            const process = lawFirmData.processes[index];
            showNotification(`Detalhes do processo ${process.processNumber}:\nCliente: ${process.name}\nValor: ${formatCurrency(process.value)}\nStatus: ${lawFirmData.statusLabels[process.status]}`, 'info');
        }

        // Excluir processo
        function deleteProcess(index) {
            if (confirm(`Excluir processo ${lawFirmData.processes[index].processNumber}?`)) {
                lawFirmData.processes.splice(index, 1);
                updateServiceCounters();
                updateProcessesTable();
                updateServicesChart();
                showNotification('Processo excluído com sucesso!', 'success');
            }
        }

        // Sugerir meta
        function suggestGoal() {
            const averageRevenue = lawFirmData.monthlyRevenue * 0.85;
            const suggestedGoal = Math.round(averageRevenue * 1.25);
            lawFirmData.revenueGoal = suggestedGoal;
            updateServiceCounters();
            showNotification(`Meta sugerida: ${formatCurrency(suggestedGoal)} (25% acima da média)`, 'success');
        }

        // Adicionar retroativo
        function addRetroactive() {
            const lastMonth = new Date();
            lastMonth.setMonth(lastMonth.getMonth() - 1);
            const formattedDate = lastMonth.toISOString().split('T')[0];
            
            document.getElementById('serviceStatus').value = 'completed';
            showNotification('Modo retroativo ativado. A data será ajustada automaticamente.', 'info');
        }

        // Gerar relatório
        function generateReport() {
            showNotification('Gerando relatório em PDF...', 'info');
            // Em produção, implementar geração de PDF
        }

        // Ver audiências
        function viewHearings() {
            let hearingList = 'Próximas audiências:\n\n';
            lawFirmData.hearings.forEach(h => {
                hearingList += `${h.date} ${h.time} - ${h.client}\n${h.type} - ${h.process}\n\n`;
            });
            showNotification(hearingList, 'info');
        }

        // Ver prazos
        function viewDeadlines() {
            let deadlineList = 'Prazos críticos:\n\n';
            lawFirmData.deadlines.filter(d => d.critical).forEach(d => {
                deadlineList += `${d.date}: ${d.description}\nCliente: ${d.client}\n\n`;
            });
            showNotification(deadlineList, 'warning');
        }

        // Agendar audiência
        function addHearing() {
            showNotification('Funcionalidade de agendamento de audiência em desenvolvimento.', 'info');
        }

        // Sincronizar calendário
        function syncCalendar() {
            showNotification('Sincronizando com Google Agenda...', 'info');
            // Em produção, implementar sincronização
        }

        // Exportar gráfico
        function exportChart() {
            const link = document.createElement('a');
            link.download = 'grafico-processos-wilson-pinheiro.png';
            link.href = document.getElementById('servicesChart').toDataURL();
            link.click();
            showNotification('Gráfico exportado com sucesso!', 'success');
        }

        // Limpar dados
        function clearData() {
            if (confirm('Limpar todos os dados de demonstração?')) {
                lawFirmData.processes = [];
                lawFirmData.monthlyRevenue = 0;
                lawFirmData.revenueGoal = 85000;
                
                // Resetar contadores de serviços
                Object.keys(lawFirmData.serviceTypes).forEach(key => {
                    lawFirmData.serviceTypes[key].count = 0;
                    lawFirmData.serviceTypes[key].revenue = 0;
                });
                
                updateServiceCounters();
                updateProcessesTable();
                updateServicesChart();
                showNotification('Dados limpos com sucesso!', 'success');
            }
        }

        // Inicializar dashboard
        function initDashboard() {
            initializeData();
            
            // Configurar eventos
            document.getElementById('addClientServiceBtn').addEventListener('click', addProcess);
            document.getElementById('suggestGoalBtn').addEventListener('click', suggestGoal);
            document.getElementById('addRetroactiveBtn').addEventListener('click', addRetroactive);
            document.getElementById('editChartBtn').addEventListener('click', () => {
                showNotification('Funcionalidade de edição do gráfico em desenvolvimento.', 'info');
            });
            document.getElementById('exportChartBtn').addEventListener('click', exportChart);
            document.getElementById('generateReportBtn').addEventListener('click', generateReport);
            document.getElementById('clearDataBtn').addEventListener('click', clearData);
            document.getElementById('adjustGoalBtn').addEventListener('click', adjustGoal);
            document.getElementById('modalCloseBtn').addEventListener('click', () => {
                document.getElementById('editModal').classList.remove('active');
            });
            
            document.getElementById('editModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
            
            document.getElementById('serviceValue').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addProcess();
            });
            
            // Animar elementos
            document.querySelectorAll('.fade-in').forEach((el, i) => {
                el.style.animationDelay = `${i * 0.1}s`;
            });
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>